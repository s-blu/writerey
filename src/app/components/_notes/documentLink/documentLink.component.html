<mat-card [@fadeInOnEnter] *transloco="let t; read: 'link'" class="link notes-item">
  <mat-card-header>
    <mat-icon class="icon">link</mat-icon>
    <mat-card-subtitle class="context">{{ contextName }}</mat-card-subtitle>
    <mat-icon class="expand" [@rotate]="isExpanded" (click)="changeExpand()">
      expand_more
    </mat-icon>
  </mat-card-header>
  <div class="exandable-wrap" [class]="{ collapsed: !isExpanded, opened: isExpanded }">
    <mat-card-content>
      <div class="link-destination">
        <wy-breadcrumb [fileInfo]="fileInfo" skipRoot="true"></wy-breadcrumb>
      </div>
      <wy-note-item-ckeditor-view class="note-text preview" [data]="link.text"></wy-note-item-ckeditor-view>
      <mat-progress-bar mode="indeterminate" *ngIf="isExpanded && !content"></mat-progress-bar>
      <wy-note-item-ckeditor-view
        class="note-text"
        *ngIf="content && isExpanded"
        [@fadeOutOnLeave]
        [data]="content"
      ></wy-note-item-ckeditor-view>
    </mat-card-content>
    <mat-card-actions *ngIf="isExpanded" [@fadeOutOnLeave] class="actions">
      <button mat-icon-button color="primary" (click)="delete()" [matTooltip]="t('delete')" class="done-button">
        <mat-icon>done</mat-icon>
      </button>
      <button mat-icon-button (click)="changeKeepOpen()" [matTooltip]="t(link.keepOpen ? 'keepClosed' : 'keepOpen')">
        <mat-icon>{{ link.keepOpen ? 'unfold_less' : 'unfold_more' }}</mat-icon>
      </button>
    </mat-card-actions>
  </div>
</mat-card>
